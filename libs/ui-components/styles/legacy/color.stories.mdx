import { Meta, ColorPalette, ColorItem } from "@storybook/addon-docs"
import resolveConfig from "tailwindcss/resolveConfig"
import { legacyColors } from "../../../../configs/tailwind/legacy/colors"

<Meta title="Style Guide/Legacy/Colors" />

# Defaults

<ColorPalette>
  <ColorItem
    title="Defaults"
    colors={Object.entries(
      resolveConfig({ theme: { colors: legacyColors } }).theme.colors
    )
      .map(([colorName, colorValues]) => {
        if (typeof colorValues === "string") {
          return [`${colorName}`, colorValues]
        }
        const defaultKey = Object.keys(colorValues).find(
          (colorShade) => colorValues[colorShade] === colorValues.DEFAULT
        )
        return [`${colorName}-${defaultKey}`, colorValues.DEFAULT]
      })
      .reduce((obj, colorPair, ci, arr) => {
        return {
          ...obj,
          [colorPair[0]]: colorPair[1],
        }
      }, {})}
  />
</ColorPalette>

# Full Color Palette

<ColorPalette>
  {Object.entries(
    resolveConfig({ theme: { colors: legacyColors } }).theme.colors
  ).map(([colorName, colorValue]) => {
    let defaultValue = null
    if (typeof colorValue === "string") {
      return (
        <ColorItem
          title={`${colorName.toLocaleUpperCase().slice(0, 1)}${colorName.slice(
            1
          )}`}
          key={colorValue}
          subtitle="Single Color"
          colors={{ [colorName]: colorValue }}
        />
      )
    }
    const displayColors = Object.keys(colorValue).reduce((obj, key) => {
      if (key === "DEFAULT") return obj
      if (colorValue[key] === colorValue.DEFAULT) {
        defaultValue = key
        return {
          ...obj,
          [key]: colorValue[key],
        }
      }
      return {
        ...obj,
        [key]: colorValue[key],
      }
    }, {})
    if (colorName != "DEFAULT") {
      return (
        <ColorItem
          title={`${colorName.toLocaleUpperCase().slice(0, 1)}${colorName.slice(
            1
          )}`}
          subtitle={`Default: ${colorName}-${defaultValue}`}
          colors={displayColors}
          key={colorName}
        />
      )
    }
    return <></>
  })}
</ColorPalette>
